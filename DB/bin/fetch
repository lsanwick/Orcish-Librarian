#!/usr/bin/env ruby
# encoding: utf-8

require 'optparse'
require File.join(File.dirname(__FILE__), '../lib/bootstrap')

manager = FetchManager.new
box = CardBox.new
sets_to_process = (ARGV.length > 0) ? ARGV : MtgSet.all_set_names
sets_to_process.each do |set_name|
  set = manager.fetch(set_name)
  if set.nil?
    debug("Could not fetch set \"#{set_name}\"")
  else
    box.add(set)
  end
  box.save_as_yaml(File.join(File.dirname(__FILE__), '../data/store'))
end
